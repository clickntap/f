(function(){var q=0;f().prototype().http=function(a){function k(a,c){c="function"===typeof c?c():null==c?"":c;l[l.length]=encodeURIComponent(a)+"\x3d"+encodeURIComponent(c)}function m(){c.onloadend=function(){};c.onerror=function(){};c.ontimeout=function(){};c.onprogress=function(){};c.onabort=function(){};q=setTimeout(function(){f("http-off").emit({url:a.url})},100)}function n(){c.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset\x3dUTF-8");a.headers instanceof Object&&
      f(Object.keys(a.headers)).each(function(b){c.setRequestHeader(b,a.headers[b])})}a.method||(a.method="GET");var l=[],r=/%20/g,c=new XMLHttpRequest;c.onloadend=function(b){m();if(200==b.target.status)try{a.onsuccess(b)}catch(g){console.log(g,b)}else try{a.onerror(b)}catch(g){console.log(g,b)}};c.onerror=function(b){m();try{a.onerror(b)}catch(g){console.log(g,b)}};c.ontimeout=function(b){m();try{a.ontimeout(b)}catch(g){console.log(g,b)}};c.onabort=function(b){m();try{a.onabort(b)}catch(g){console.log(g,
        b)}};c.onprogress=function(b){try{a.onprogress(b)}catch(g){}};clearTimeout(q);f("http-on").emit({url:a.url});if(this.input instanceof Element&&"form"==this.input.tagName.toLowerCase()){for(var d=this.input.elements,p=0;p<d.length;p++){var h=d[p];h.disabled||("radio"==h.type||"checkbox"==h.type?h.checked&&k(h.name,h.value):k(h.name,h.value))}a.params instanceof Object&&f(Object.keys(a.params)).each(function(b){k(b,a.params[b])});try{var e=new URL(a.url)}catch(b){0<a.url.indexOf("http")?e=new URL(a.url):
        (d=document.location.pathname,d=d.substring(0,d.indexOf("/web.app")),"/"==d.charAt(0)&&(d=d.substring(1)),""!=d&&(d+="/"),e=new URL(document.location.protocol+"//"+document.location.host+"/"+d+a.url))}c.open(a.method,e);n();c.timeout=a.timeout?a.timeout:0;c.send(l.join("\x26").replace(r,"+"))}else if(this.input instanceof Object){try{e=new URL(a.url)}catch(b){0<a.url.indexOf("http")?e=new URL(a.url):(d=document.location.pathname,d=d.substring(0,d.indexOf("/web.app")),"/"==d.charAt(0)&&(d=d.substring(1)),
        ""!=d&&(d+="/"),e=new URL(document.location.protocol+"//"+document.location.host+"/"+d+a.url))}a.params instanceof Object&&f(Object.keys(a.params)).each(function(b){e.searchParams.set(b,a.params[b])});c.open(a.method,e);n();c.timeout=a.timeout?a.timeout:0;c.send(JSON.stringify(this.input))}else{if("get"==a.method.toLowerCase()){try{e=new URL(a.url)}catch(b){e=0<a.url.indexOf("http")?new URL(a.url):new URL(document.location.protocol+"//"+document.location.host+"/"+a.url)}a.params instanceof Object&&
f(Object.keys(a.params)).each(function(b){e.searchParams.set(b,a.params[b])});c.open(a.method,e);n();c.timeout=a.timeout?a.timeout:0;c.send()}"post"==a.method.toLowerCase()&&(Array.isArray(a.params)?f(a.params).each(function(a){k(a.name,a.value)}):a.params instanceof Object&&f(Object.keys(a.params)).each(function(b){k(b,a.params[b])}),c.open(a.method,a.url),n(),c.timeout=a.timeout?a.timeout:0,c.send(l.join("\x26").replace(r,"+")))}return this}})();