(function(){var templatepagination=f().tc('[% var pagination \x3d f().app().get(\'pagination.\'+conf.name) %]\x3cdiv class\x3d"toolbar"\x3e\x3cdiv class\x3d"toolbar-mode"\x3e[%if(pagination.switchMode \x3d\x3d \'yes\'){%]  [%if(pagination.mode \x3d\x3d \'list\'){%]    \x3cdiv onclick\x3d"f(event).pagination({channel:\'[%\x3dconf.name%]\',what:\'mode\',value:\'grid\'})"\x3e\x3cdiv\x3e\x3ci class\x3d"[%\x3df().fa()%] fa-table"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e  [%}else{%]    \x3cdiv onclick\x3d"f(event).pagination({channel:\'[%\x3dconf.name%]\',what:\'mode\',value:\'list\'})"\x3e\x3cdiv\x3e\x3ci class\x3d"[%\x3df().fa()%] fa-grip-horizontal"\x3e\x3c/i\x3e\x3c/div\x3e\x3c/div\x3e  [%}%][%}%]\x3c/div\x3e\x3cdiv class\x3d"toolbar-navigator"\x3e[%if(conf.size \x3e 1){%]  [%if(conf.n \x3e 2){%]    \x3cdiv onclick\x3d"f(event).pagination({channel:\'[%\x3dconf.name%]\',what:\'page-first\'})"\x3e\x3ci class\x3d"[%\x3df().fa()%] fa-chevron-double-left"\x3e\x3c/i\x3e\x3c/div\x3e  [%}else{%]    \x3cdiv class\x3d"off"\x3e\x3ci class\x3d"[%\x3df().fa()%] fa-chevron-double-left"\x3e\x3c/i\x3e\x3c/div\x3e  [%}%]  [%if(conf.n \x3e 1){%]    \x3cdiv onclick\x3d"f(event).pagination({channel:\'[%\x3dconf.name%]\',what:\'page-prev\'})"\x3e\x3ci class\x3d"[%\x3df().fa()%] fa-chevron-left"\x3e\x3c/i\x3e\x3c/div\x3e  [%}else{%]    \x3cdiv class\x3d"off"\x3e\x3ci class\x3d"[%\x3df().fa()%] fa-chevron-left"\x3e\x3c/i\x3e\x3c/div\x3e  [%}%]  [%for(var i\x3d-2;i\x3cconf.size+2;i++){ if(Math.abs(i-conf.n+1) \x3c 3){ %]      [%if(i \x3e\x3d 0 \x26\x26 i\x3cconf.size){%]        \x3cdiv class\x3d"btn-page [%if(i+1 \x3d\x3d conf.n){%]active[%}%]" onclick\x3d"f(event).pagination({channel:\'[%\x3dconf.name%]\',what:\'page\',value:[%\x3d(i+1)%]})"\x3e\x3cdiv\x3e[%\x3d(i+1)%]\x3c/div\x3e\x3c/div\x3e      [%}else{%]        \x3cdiv class\x3d"btn-page off"\x3e\x3c/div\x3e      [%}%]  [%}}%]  [%if(conf.size - conf.n \x3e 0){ %]    \x3cdiv onclick\x3d"f(event).pagination({channel:\'[%\x3dconf.name%]\',what:\'page-next\'})"\x3e\x3ci class\x3d"[%\x3df().fa()%] fa-chevron-right"\x3e\x3c/i\x3e\x3c/div\x3e  [%}else{ Math.ceil(count/limit)%]    \x3cdiv class\x3d"off"\x3e\x3ci class\x3d"[%\x3df().fa()%] fa-chevron-right"\x3e\x3c/i\x3e\x3c/div\x3e  [%}%]  [%if(conf.size - conf.n \x3e 1){ %]    \x3cdiv onclick\x3d"f(event).pagination({channel:\'[%\x3dconf.name%]\',what:\'page-last\'})"\x3e\x3ci class\x3d"[%\x3df().fa()%] fa-chevron-double-right"\x3e\x3c/i\x3e\x3c/div\x3e  [%}else{ Math.ceil(count/limit)%]    \x3cdiv class\x3d"off"\x3e\x3ci class\x3d"[%\x3df().fa()%] fa-chevron-double-right"\x3e\x3c/i\x3e\x3c/div\x3e  [%}%][%}%]\x3c/div\x3e\x3cdiv class\x3d"toolbar-info"\x3e\x3cspan class\x3d"f-tr"\x3e[%if(conf.size \x3e 1){%]label.page\x3c/span\x3e\x26nbsp;\x3cb\x3e[%\x3dconf.n%]\x3c/b\x3e/\x3cb\x3e[%\x3dconf.size%]\x3c/b\x3e,\x26nbsp;\x3cb\x3e[%\x3dfrom%]\x3c/b\x3e-[%}%]\x3cb\x3e[%\x3dfrom+Math.min(limit,size)%]\x3c/b\x3e\x26nbsp;\x3cspan class\x3d"f-tr"\x3elabel.of\x3c/span\x3e\x26nbsp;\x3cb\x3e[%\x3dcount%]\x3c/b\x3e\x26nbsp;\x26nbsp;\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"[%\x3dconf.name%] view-[%\x3dpagination.mode%]"\x3e[%if(conf.template){%]  [%    var html;    try {      html \x3d conf.template({data:{items:items, conf:conf}});    } catch(err) {      html \x3d err;    }  %]  [%\x3d html %][%}else if(pagination.mode \x3d\x3d \'list\') {%]  \x3ctable\x3e  [%  var sortableCount \x3d 0;  f(conf.fields).each(function(field) {    if(field.sortable){      sortableCount++;    }  });  %]  [%f(conf.fields).each(function(field) {%]    [%    var sort \x3d \'\';    var sortClass \x3d \'\';    if(field.sortable) {      if(pagination.sort.indexOf(field.name) \x3d\x3d 0){        if(pagination.sort.indexOf(\'asc\') \x3e 0){          sort \x3d \'-up\';          sortClass \x3d \'sort-up\';        }else{          sort \x3d \'-down\';          sortClass \x3d \'sort-down\';        }      }else{      }    }    %]    [%if(field.sortable || pagination.mode \x3d\x3d \'list\'){%]      \x3cth style\x3d"width:[%\x3dfield.width%]" class\x3d"[%\x3dsortClass%]" [%if(field.sortable){%]onclick\x3d"f(event).pagination({channel:\'[%\x3dconf.name%]\',what:\'sort\',name:\'[%\x3dfield.name%]\'})"[%}%]\x3e      \x3cspan class\x3d"f-tr" code\x3d"label.[%\x3dfield.name%]"\x3e[%\x3dfield.name%]\x3c/span\x3e      [%if(field.sortable){%]        \x3ci class\x3d"[%\x3df().fa()%] fa-sort[%\x3dsort%]"\x3e\x3c/i\x3e      [%}%]      \x3c/th\x3e    [%}%]  [%});%]  [%f(items).each(function(item) {    var me \x3d item;    %]    \x3ctr onclick\x3d"f(event).pagination({channel:\'[%\x3dconf.name%]\',what:\'select\',id:\'[%\x3ditem.id%]\'})"\x3e    [%f(conf.fields).each(function(field) {%]      [%if(field.template){        var html;        try {          html \x3d field.template({data:item});        } catch(err) {          html \x3d err;        }        %]        \x3ctd style\x3d"width:[%\x3dfield.width%]"\x3e\x3cdiv class\x3d"[%\x3dconf.name%]-[%\x3dfield.name%]"\x3e[%\x3dhtml%]\x3c/div\x3e\x3c/td\x3e      [%}else{%]        \x3ctd style\x3d"width:[%\x3dfield.width%]"\x3e\x3cdiv class\x3d"[%\x3dconf.name%]-[%\x3dfield.name%]"\x3e[%\x3ditem[field.name]%]\x3c/div\x3e\x3c/td\x3e      [%}%]    [%});%]    \x3c/tr\x3e  [%});%]  \x3c/table\x3e[%}else{%]  \x3cdiv class\x3d"grid [%if(conf.width \x3d\x3d\x3d \'2x\'){%]grid-2x[%}%]"\x3e  [%f(items).each(function(item) {    var html;    try {      html \x3d conf.grid({data:item});    } catch(err) {      html \x3d err;    }    %]    \x3cdiv class\x3d"grid-item" data-id\x3d"[%\x3ditem.id%]" onclick\x3d"f(event).pagination({channel:\'[%\x3dconf.name%]\',what:\'select\',id:\'[%\x3ditem.id%]\'})"\x3e      \x3cdiv class\x3d"grid-item-content"\x3e[%\x3dhtml%]\x3c/div\x3e    \x3c/div\x3e  [%});%]  \x3c/div\x3e[%}%]\x3c/div\x3e');
  function paginationRender(container,json,callback){var sortName=f().app().get("pagination."+json.name+".sort")||"";var params={from:f().app().get("pagination."+json.name+".from",0),limit:json.limit};if(sortName)params.sort=sortName;var searchText="";if(json.search){searchText=f().app().get("search."+json.search.source,"");params[json.search.name]=searchText}if(json.params)for(key in json.params)params[key]=json.params[key];if(json.secure)f().api(function(headers){f().http({url:json.url,headers:headers,
        params:params,onsuccess:function(event){var data=JSON.parse(event.target.responseText);f().app().set("pagination."+json.name+".conf",json);f().app().set("pagination."+json.name+".data",data);if(!data.limit)data.limit=Number.MAX_SAFE_INTEGER;if(!data.from)data.from=0;json.n=data.from/data.limit+1;if(data.count/data.limit==Math.floor(data.count/data.limit))json.size=Math.floor(data.count/data.limit);else json.size=Math.floor(data.count/data.limit)+1;data.conf=json;f(container).html(templatepagination(data));
          f(container).item.setAttribute("name",json.name);f("pagination-changed").emit({name:json.name});if(typeof callback=="function")callback(container)}})})}f().prototype().pagination=function(container,json){if(container.constructor==={}.constructor){var command=container;var sender=this;f(".f-pagination ."+command.channel).each(function(item){var pagination=f().app().get("pagination."+command.channel);var me=item;if(command.what=="sort"){var sort="asc";if(f(sender.input.target).closest("th").hasClass("sort-up"))sort=
        "desc";pagination.sort=command.name+"|"+sort;pagination.from=0}if(isNaN(pagination.from))pagination.from=0;if(command.what=="page-first")pagination.from=0;if(command.what=="update")pagination.from=0;if(command.what=="page-prev")pagination.from=pagination.from-pagination.data.limit;if(command.what=="page-next")pagination.from=pagination.from+pagination.data.limit;if(command.what=="page-last")pagination.from=pagination.data.limit*Math.floor(pagination.data.count/pagination.data.limit);if(command.what==
        "page")pagination.from=pagination.data.limit*(command.value-1);if(command.what=="mode")pagination.mode=command.value;if(command.what=="select"){try{var target=sender.input.target;var formItem=f(item).closest(".f-form-item");if(formItem.items.length!=0){if(command.value)formItem.find(".f-form-input-search").html(command.value);else{if(!target.onclick)target=f(target).closest("a").items[0];formItem.find(".f-form-input-search").html(target.innerText.trim())}formItem.find('input[type\x3d"hidden"]').items[0].value=
          command.id;formItem.find(".f-form-input-search-clean").removeClass("hide");f(item).closest(".f-form-box-search").addClass("hide");f(item).closest(".form-modal").removeClass("form-modal-pagination");sender.input.stopImmediatePropagation()}}catch(e){}f("pagination").emit(command)}else paginationRender(item.parentElement,pagination.conf,function(container){f(".f-pagination").tr();f(container).find(".f_svg").renderSvg()})})}else{var sort="";try{json.grid=f().tc(f(container).find("script[name\x3dtemplate-grid]").html())}catch(err){}f(json.fields).each(function(field){try{field.template=
          f().tc(f(container).find("script[name\x3d"+field.name+"]").html())}catch(err){}json.mode=f().app().get("pagination."+json.name+".mode",json.mode);json.switchMode=f().app().get("pagination."+json.name+".switchMode",json.switchMode?json.switchMode:"yes");if(field.sort)json.sort=f().app().get("pagination."+json.name+".sort",field.name+"|"+field.sort);json.search=f().app().get("pagination."+json.name+".search",json.search)});if(json.template)f().http({url:json.template,onsuccess:function(event){var text=
event.target.responseText;try{json.template=f().tc(text)}catch(e){}paginationRender(container,json,json.onready)}});else paginationRender(container,json,json.onready)}return this};var paginationPlugin=function(resolve,context){var item=f(context.div).find(".f_pagination").item;if(item){var json=JSON.parse(item.innerText);json.onready=function(){f(context.div).uiRender(context.callback)};f(item).addClass("f-pagination").pagination(item,json).removeClass("f_pagination")}else resolve(context)};f().uiPlugins().push(paginationPlugin)})();