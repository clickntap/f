(function(){function d(d){var b=f(d).closest(".f-editor").find(".f-toolbar"),a=b.find(".bold");a.item&&(document.queryCommandState("bold")?a.addClass("on"):a.removeClass("on"));a=b.find(".italic");a.item&&(document.queryCommandState("italic")?a.addClass("on"):a.removeClass("on"));a=b.find(".ordered-list");a.item&&(document.queryCommandState("insertOrderedList")?a.addClass("on"):a.removeClass("on"));a=b.find(".justify-left");a.item&&(document.queryCommandState("justifyLeft")?a.addClass("on"):a.removeClass("on"));
    a=b.find(".justify-center");a.item&&(document.queryCommandState("justifyCenter")?a.addClass("on"):a.removeClass("on"));b=b.find(".justify-right");b.item&&(document.queryCommandState("justifyRight")?b.addClass("on"):b.removeClass("on"));b=(new DOMParser).parseFromString(d.innerHTML,"text/html").body;b.normalize();d.innerHTML=b.innerHTML;e(b,0)}function e(d,b){d.childNodes.forEach(function(a){console.log(b,a.nodeName,a.nodeType,a.nodeValue);e(a,b+1)})}var g=0;f().uiPlugins().push(function(e,b){f(b.div).find(".f_editor").each(function(a){var c=
      f(a).find(".f-document");c.on("focus",function(){clearTimeout(g);f(a).addClass("on")});c.on("blur",function(){clearTimeout(g);g=setTimeout(function(){f(a).removeClass("on").find(".f-item").removeClass("on")},250)});c.item.setAttribute("contenteditable","true");c.item.addEventListener("DOMSubtreeModified",function(a){setTimeout(function(){d(c.item)},0)});c.item.addEventListener("selectstart",function(a){setTimeout(function(){d(c.item)},0)});c.item.addEventListener("keyup",function(a){setTimeout(function(){d(c.item)},
        0)});var b=f(a).find(".f-toolbar");setTimeout(function(){document.execCommand("enableInlineTableEditing")},1E3);b.find(".bold").on("click",function(){document.execCommand("bold");c.item.focus();d(c.item)});b.find(".italic").on("click",function(){document.execCommand("italic");c.item.focus();d(c.item)});b.find(".ordered-list").on("click",function(){document.execCommand("insertOrderedList");c.item.focus();d(c.item)});b.find(".justify-left").on("click",function(){document.execCommand("justifyLeft");
c.item.focus();d(c.item)});b.find(".justify-center").on("click",function(){document.execCommand("justifyCenter");c.item.focus();d(c.item)});b.find(".justify-right").on("click",function(){document.execCommand("justifyRight");c.item.focus();d(c.item)});f(a).removeClass("f_editor").addClass("f-editor")});e(b)})})();